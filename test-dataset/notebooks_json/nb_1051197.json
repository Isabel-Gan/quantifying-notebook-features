{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 71,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "import pandas as pd\n",
    "import numpy as np\n",
    "import statsmodels.formula.api as smf\n",
    "###################### Matplotlib #######################\n",
    "# import matplotlib pyplot commands\n",
    "from matplotlib.pyplot import *\n",
    "\n",
    "import matplotlib\n",
    "matplotlib.style.use('ggplot')\n",
    "\n",
    "# Show Plots in the Notebook\n",
    "%matplotlib inline\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 72,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Com_AkwarmMetadataID</th>\n",
       "      <th>bi_LocID</th>\n",
       "      <th>Com_Buildinginputid</th>\n",
       "      <th>bi_Addr</th>\n",
       "      <th>bi_City</th>\n",
       "      <th>bi_BldgName</th>\n",
       "      <th>bi_CreateDate</th>\n",
       "      <th>bi_AuditDate</th>\n",
       "      <th>bi_YearBuilt</th>\n",
       "      <th>bi_yearlastremodel</th>\n",
       "      <th>...</th>\n",
       "      <th>Thermal BTU/HDD/Year)</th>\n",
       "      <th>Annual Cost Eff. Energy Savings</th>\n",
       "      <th>Installed Cost</th>\n",
       "      <th>Simple payback</th>\n",
       "      <th>Has retrofit info?</th>\n",
       "      <th>Cost eff energy savings / SF</th>\n",
       "      <th>% cost eff energy savings</th>\n",
       "      <th>NPV savings</th>\n",
       "      <th>Unnamed: 374</th>\n",
       "      <th>Unnamed: 375</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>157</td>\n",
       "      <td>88169</td>\n",
       "      <td>153</td>\n",
       "      <td>P O Box 109</td>\n",
       "      <td>Sleetmute</td>\n",
       "      <td>Sleetmute Water Treatment Plant</td>\n",
       "      <td>40982.46939</td>\n",
       "      <td>2011-04-26 10:09:18.0000000 +00:00</td>\n",
       "      <td>1990</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>5,528</td>\n",
       "      <td>$3,284</td>\n",
       "      <td>$5,700</td>\n",
       "      <td>1.7</td>\n",
       "      <td>1</td>\n",
       "      <td>$4.74</td>\n",
       "      <td>17%</td>\n",
       "      <td>$48,897</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>10</td>\n",
       "      <td>85519</td>\n",
       "      <td>6</td>\n",
       "      <td>P O Box 100</td>\n",
       "      <td>Shaktoolik</td>\n",
       "      <td>Tribal Office Building</td>\n",
       "      <td>9/30/2011</td>\n",
       "      <td>2011-04-07 09:36:10.0000000 +00:00</td>\n",
       "      <td>1975</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>10,996</td>\n",
       "      <td>$1,518</td>\n",
       "      <td>$3,371</td>\n",
       "      <td>2.2</td>\n",
       "      <td>1</td>\n",
       "      <td>$1.43</td>\n",
       "      <td>28%</td>\n",
       "      <td>$22,413</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>496</td>\n",
       "      <td>83418</td>\n",
       "      <td>442</td>\n",
       "      <td>1710 30th</td>\n",
       "      <td>Fairbanks</td>\n",
       "      <td>Fire Training Center</td>\n",
       "      <td>7/24/2012</td>\n",
       "      <td>2011-08-16 14:23:13.7855186 -08:00</td>\n",
       "      <td>1981</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>22,238</td>\n",
       "      <td>$1,553</td>\n",
       "      <td>$4,629</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>$0.41</td>\n",
       "      <td>20%</td>\n",
       "      <td>$18,124</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>603</td>\n",
       "      <td>120466</td>\n",
       "      <td>549</td>\n",
       "      <td>Lot 3 ANCSA 14(c) Plat 90-2</td>\n",
       "      <td>False Pass</td>\n",
       "      <td>False Pass City Hall</td>\n",
       "      <td>7/27/2012</td>\n",
       "      <td>2012-01-24 13:15:27.4991289 -09:00</td>\n",
       "      <td>1985</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>12,987</td>\n",
       "      <td>$858</td>\n",
       "      <td>$1,600</td>\n",
       "      <td>1.9</td>\n",
       "      <td>1</td>\n",
       "      <td>$0.35</td>\n",
       "      <td>14%</td>\n",
       "      <td>$10,633</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>11</td>\n",
       "      <td>85537</td>\n",
       "      <td>16</td>\n",
       "      <td>P O Box 10</td>\n",
       "      <td>Shaktoolik</td>\n",
       "      <td>Water Treatment Plant</td>\n",
       "      <td>11/2/2011</td>\n",
       "      <td>2011-04-04 08:10:42.0000000 +00:00</td>\n",
       "      <td>1977</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>16,427</td>\n",
       "      <td>$11,020</td>\n",
       "      <td>$3,500</td>\n",
       "      <td>0.3</td>\n",
       "      <td>1</td>\n",
       "      <td>$5.22</td>\n",
       "      <td>54%</td>\n",
       "      <td>$196,749</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows Ã— 376 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   Com_AkwarmMetadataID  bi_LocID  Com_Buildinginputid  \\\n",
       "0                   157     88169                  153   \n",
       "1                    10     85519                    6   \n",
       "2                   496     83418                  442   \n",
       "3                   603    120466                  549   \n",
       "4                    11     85537                   16   \n",
       "\n",
       "                       bi_Addr     bi_City                      bi_BldgName  \\\n",
       "0                  P O Box 109   Sleetmute  Sleetmute Water Treatment Plant   \n",
       "1                  P O Box 100  Shaktoolik           Tribal Office Building   \n",
       "2                    1710 30th   Fairbanks             Fire Training Center   \n",
       "3  Lot 3 ANCSA 14(c) Plat 90-2  False Pass             False Pass City Hall   \n",
       "4                   P O Box 10  Shaktoolik            Water Treatment Plant   \n",
       "\n",
       "  bi_CreateDate                        bi_AuditDate  bi_YearBuilt  \\\n",
       "0   40982.46939  2011-04-26 10:09:18.0000000 +00:00          1990   \n",
       "1     9/30/2011  2011-04-07 09:36:10.0000000 +00:00          1975   \n",
       "2     7/24/2012  2011-08-16 14:23:13.7855186 -08:00          1981   \n",
       "3     7/27/2012  2012-01-24 13:15:27.4991289 -09:00          1985   \n",
       "4     11/2/2011  2011-04-04 08:10:42.0000000 +00:00          1977   \n",
       "\n",
       "   bi_yearlastremodel      ...       Thermal BTU/HDD/Year)  \\\n",
       "0                   0      ...                       5,528   \n",
       "1                   0      ...                      10,996   \n",
       "2                   0      ...                      22,238   \n",
       "3                   0      ...                      12,987   \n",
       "4                   0      ...                      16,427   \n",
       "\n",
       "  Annual Cost Eff. Energy Savings  Installed Cost Simple payback  \\\n",
       "0                         $3,284          $5,700             1.7   \n",
       "1                         $1,518          $3,371             2.2   \n",
       "2                         $1,553          $4,629               3   \n",
       "3                           $858          $1,600             1.9   \n",
       "4                        $11,020          $3,500             0.3   \n",
       "\n",
       "  Has retrofit info? Cost eff energy savings / SF % cost eff energy savings  \\\n",
       "0                  1                       $4.74                        17%   \n",
       "1                  1                       $1.43                        28%   \n",
       "2                  1                       $0.41                        20%   \n",
       "3                  1                       $0.35                        14%   \n",
       "4                  1                       $5.22                        54%   \n",
       "\n",
       "  NPV savings  Unnamed: 374  Unnamed: 375  \n",
       "0    $48,897            NaN           NaN  \n",
       "1    $22,413            NaN           NaN  \n",
       "2    $18,124            NaN           NaN  \n",
       "3    $10,633            NaN           NaN  \n",
       "4   $196,749            NaN           NaN  \n",
       "\n",
       "[5 rows x 376 columns]"
      ]
     },
     "execution_count": 72,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df = pd.read_csv(r\"C:\\Users\\dustin\\Desktop\\AuditModeledMasterDataSheet wVentilation&Costs 3-26-2013 - Updated Schools Graph.csv\", header=0, na_values=[' -  ',' -   ','#DIV/0!'])\n",
    "df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 73,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "Com_AkwarmMetadataID                 int64\n",
       "bi_LocID                           float64\n",
       "Com_Buildinginputid                  int64\n",
       "bi_Addr                             object\n",
       "bi_City                             object\n",
       "bi_BldgName                         object\n",
       "bi_CreateDate                       object\n",
       "bi_AuditDate                        object\n",
       "bi_YearBuilt                         int64\n",
       "bi_yearlastremodel                   int64\n",
       "bi_Reslivingunits                    int64\n",
       "bi_BldgOccups                       object\n",
       "Com_Buildingtypeid                   int64\n",
       "BuildingType                        object\n",
       "ChangedBuildingTypeID               object\n",
       "Otherbuildingtypedescription        object\n",
       "Usage Types Changes                 object\n",
       "Research Usage Types:               object\n",
       "IsEducation?                       float64\n",
       "Electricutilityid                    int64\n",
       "Elec_Utility_Name                   object\n",
       "IsCommercial                         int64\n",
       "Gasutilityid                         int64\n",
       "Gas_Utility_Name                    object\n",
       "IsCommercial.1                     float64\n",
       "Id                                  object\n",
       "L_SourceAddr1                       object\n",
       "L_City                              object\n",
       "C_CityName                          object\n",
       "ANCSARegionId                        int64\n",
       "                                    ...   \n",
       "Unnamed: 346                       float64\n",
       "Elec complete?                     float64\n",
       "Gas complete?                      float64\n",
       "Oil1 complete?                     float64\n",
       "Oil2 complete?                     float64\n",
       "Prop complete?                     float64\n",
       "HWDist complete?                   float64\n",
       "SteamDIST  complete?                object\n",
       "Elec >50% Diff                      object\n",
       "Gas >50% Diff                       object\n",
       "Oil1 >50% Diff                      object\n",
       "Oil2 >50% Diff                     float64\n",
       "Prop >50% Diff                     float64\n",
       "HWDist >50% Diff                   float64\n",
       "SteamDIST >50% Diff                float64\n",
       "PROBLEM_FILE?                      float64\n",
       "Total Vent AirExch (ft3/yr)        float64\n",
       "Vent / SQFT / YR                   float64\n",
       "Vent / Envelope Area / YR          float64\n",
       "ThermalBTU/YR                        int64\n",
       "Thermal BTU/HDD/Year)               object\n",
       "Annual Cost Eff. Energy Savings     object\n",
       "Installed Cost                      object\n",
       "Simple payback                      object\n",
       "Has retrofit info?                   int64\n",
       "Cost eff energy savings / SF        object\n",
       "% cost eff energy savings           object\n",
       "NPV savings                         object\n",
       "Unnamed: 374                       float64\n",
       "Unnamed: 375                        object\n",
       "dtype: object"
      ]
     },
     "execution_count": 73,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df.dtypes"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 74,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Com_AkwarmMetadataID</th>\n",
       "      <th>Research Usage Types:</th>\n",
       "      <th>Total Vent AirExch (ft3/yr)</th>\n",
       "      <th>Vent / SQFT / YR</th>\n",
       "      <th>Vent / Envelope Area / YR</th>\n",
       "      <th>ThermalBTU/YR</th>\n",
       "      <th>bi_Addr</th>\n",
       "      <th>bi_City</th>\n",
       "      <th>bi_BldgName</th>\n",
       "      <th>Envelope U-value</th>\n",
       "      <th>EnvelopeArea:</th>\n",
       "      <th>HDD(FromWhitePaper)</th>\n",
       "      <th>PrimaryFuel_C/MMBTU</th>\n",
       "      <th>AnnualEnergyMMBTUs</th>\n",
       "      <th>RegionName</th>\n",
       "      <th>Building Age:</th>\n",
       "      <th>BEST SQFT</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>157</td>\n",
       "      <td>Washeteria / Water Plant</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>73733315</td>\n",
       "      <td>P O Box 109</td>\n",
       "      <td>Sleetmute</td>\n",
       "      <td>Sleetmute Water Treatment Plant</td>\n",
       "      <td>0.049</td>\n",
       "      <td>2312</td>\n",
       "      <td>13339</td>\n",
       "      <td>45.45</td>\n",
       "      <td>380</td>\n",
       "      <td>Calista</td>\n",
       "      <td>22</td>\n",
       "      <td>693</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>10</td>\n",
       "      <td>Office_Less_Than_20000</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>153055389</td>\n",
       "      <td>P O Box 100</td>\n",
       "      <td>Shaktoolik</td>\n",
       "      <td>Tribal Office Building</td>\n",
       "      <td>0.082</td>\n",
       "      <td>3523</td>\n",
       "      <td>13919</td>\n",
       "      <td>25.91</td>\n",
       "      <td>177</td>\n",
       "      <td>Bering Straits Native Corporation</td>\n",
       "      <td>37</td>\n",
       "      <td>1064</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>496</td>\n",
       "      <td>Education_Single</td>\n",
       "      <td>312000</td>\n",
       "      <td>82</td>\n",
       "      <td>285</td>\n",
       "      <td>317419830</td>\n",
       "      <td>1710 30th</td>\n",
       "      <td>Fairbanks</td>\n",
       "      <td>Fire Training Center</td>\n",
       "      <td>0.051</td>\n",
       "      <td>11758</td>\n",
       "      <td>14274</td>\n",
       "      <td>18.41</td>\n",
       "      <td>345</td>\n",
       "      <td>Doyon - Fairbanks North Star Borough only</td>\n",
       "      <td>31</td>\n",
       "      <td>3796</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>603</td>\n",
       "      <td>Office_Less_Than_20000</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>126399681</td>\n",
       "      <td>Lot 3 ANCSA 14(c) Plat 90-2</td>\n",
       "      <td>False Pass</td>\n",
       "      <td>False Pass City Hall</td>\n",
       "      <td>0.047</td>\n",
       "      <td>6632</td>\n",
       "      <td>9733</td>\n",
       "      <td>28.12</td>\n",
       "      <td>145</td>\n",
       "      <td>Aleut</td>\n",
       "      <td>27</td>\n",
       "      <td>2448</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>11</td>\n",
       "      <td>Washeteria / Water Plant</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>228648600</td>\n",
       "      <td>P O Box 10</td>\n",
       "      <td>Shaktoolik</td>\n",
       "      <td>Water Treatment Plant</td>\n",
       "      <td>0.082</td>\n",
       "      <td>6638</td>\n",
       "      <td>13919</td>\n",
       "      <td>25.91</td>\n",
       "      <td>688</td>\n",
       "      <td>Bering Straits Native Corporation</td>\n",
       "      <td>35</td>\n",
       "      <td>2112</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   Com_AkwarmMetadataID     Research Usage Types:  \\\n",
       "0                   157  Washeteria / Water Plant   \n",
       "1                    10    Office_Less_Than_20000   \n",
       "2                   496          Education_Single   \n",
       "3                   603    Office_Less_Than_20000   \n",
       "4                    11  Washeteria / Water Plant   \n",
       "\n",
       "   Total Vent AirExch (ft3/yr)  Vent / SQFT / YR  Vent / Envelope Area / YR  \\\n",
       "0                          NaN               NaN                        NaN   \n",
       "1                          NaN               NaN                        NaN   \n",
       "2                       312000                82                        285   \n",
       "3                          NaN               NaN                        NaN   \n",
       "4                          NaN               NaN                        NaN   \n",
       "\n",
       "   ThermalBTU/YR                      bi_Addr     bi_City  \\\n",
       "0       73733315                  P O Box 109   Sleetmute   \n",
       "1      153055389                  P O Box 100  Shaktoolik   \n",
       "2      317419830                    1710 30th   Fairbanks   \n",
       "3      126399681  Lot 3 ANCSA 14(c) Plat 90-2  False Pass   \n",
       "4      228648600                   P O Box 10  Shaktoolik   \n",
       "\n",
       "                       bi_BldgName  Envelope U-value  EnvelopeArea:  \\\n",
       "0  Sleetmute Water Treatment Plant             0.049           2312   \n",
       "1           Tribal Office Building             0.082           3523   \n",
       "2             Fire Training Center             0.051          11758   \n",
       "3             False Pass City Hall             0.047           6632   \n",
       "4            Water Treatment Plant             0.082           6638   \n",
       "\n",
       "   HDD(FromWhitePaper)  PrimaryFuel_C/MMBTU  AnnualEnergyMMBTUs  \\\n",
       "0                13339                45.45                 380   \n",
       "1                13919                25.91                 177   \n",
       "2                14274                18.41                 345   \n",
       "3                 9733                28.12                 145   \n",
       "4                13919                25.91                 688   \n",
       "\n",
       "                                  RegionName  Building Age:  BEST SQFT  \n",
       "0                                    Calista             22        693  \n",
       "1          Bering Straits Native Corporation             37       1064  \n",
       "2  Doyon - Fairbanks North Star Borough only             31       3796  \n",
       "3                                      Aleut             27       2448  \n",
       "4          Bering Straits Native Corporation             35       2112  "
      ]
     },
     "execution_count": 74,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "clean_df = df[['Com_AkwarmMetadataID', 'Research Usage Types:','Total Vent AirExch (ft3/yr)', \n",
    "               'Vent / SQFT / YR', 'Vent / Envelope Area / YR', 'ThermalBTU/YR', 'bi_Addr', 'bi_City', \n",
    "               'bi_BldgName', 'Envelope U-value', 'EnvelopeArea:', 'HDD(FromWhitePaper)', 'PrimaryFuel_C/MMBTU',\n",
    "              'AnnualEnergyMMBTUs', 'RegionName', 'Building Age:','BEST SQFT']]\n",
    "clean_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 75,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Com_AkwarmMetadataID</th>\n",
       "      <th>Usage_Type</th>\n",
       "      <th>TotalVent</th>\n",
       "      <th>Vent / SQFT / YR</th>\n",
       "      <th>Vent / Envelope Area / YR</th>\n",
       "      <th>AnnThermalBTU</th>\n",
       "      <th>bi_Addr</th>\n",
       "      <th>bi_City</th>\n",
       "      <th>bi_BldgName</th>\n",
       "      <th>TotalUvalue</th>\n",
       "      <th>EnvelopeArea</th>\n",
       "      <th>HDD</th>\n",
       "      <th>PrimaryFuel_C/MMBTU</th>\n",
       "      <th>AnnualEnergyMMBTUs</th>\n",
       "      <th>RegionName</th>\n",
       "      <th>age</th>\n",
       "      <th>sqft</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>157</td>\n",
       "      <td>Washeteria / Water Plant</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>73733315</td>\n",
       "      <td>P O Box 109</td>\n",
       "      <td>Sleetmute</td>\n",
       "      <td>Sleetmute Water Treatment Plant</td>\n",
       "      <td>0.049</td>\n",
       "      <td>2312</td>\n",
       "      <td>13339</td>\n",
       "      <td>45.45</td>\n",
       "      <td>380</td>\n",
       "      <td>Calista</td>\n",
       "      <td>22</td>\n",
       "      <td>693</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>10</td>\n",
       "      <td>Office_Less_Than_20000</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>153055389</td>\n",
       "      <td>P O Box 100</td>\n",
       "      <td>Shaktoolik</td>\n",
       "      <td>Tribal Office Building</td>\n",
       "      <td>0.082</td>\n",
       "      <td>3523</td>\n",
       "      <td>13919</td>\n",
       "      <td>25.91</td>\n",
       "      <td>177</td>\n",
       "      <td>Bering Straits Native Corporation</td>\n",
       "      <td>37</td>\n",
       "      <td>1064</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>496</td>\n",
       "      <td>Education_Single</td>\n",
       "      <td>312000</td>\n",
       "      <td>82</td>\n",
       "      <td>285</td>\n",
       "      <td>317419830</td>\n",
       "      <td>1710 30th</td>\n",
       "      <td>Fairbanks</td>\n",
       "      <td>Fire Training Center</td>\n",
       "      <td>0.051</td>\n",
       "      <td>11758</td>\n",
       "      <td>14274</td>\n",
       "      <td>18.41</td>\n",
       "      <td>345</td>\n",
       "      <td>Doyon - Fairbanks North Star Borough only</td>\n",
       "      <td>31</td>\n",
       "      <td>3796</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>603</td>\n",
       "      <td>Office_Less_Than_20000</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>126399681</td>\n",
       "      <td>Lot 3 ANCSA 14(c) Plat 90-2</td>\n",
       "      <td>False Pass</td>\n",
       "      <td>False Pass City Hall</td>\n",
       "      <td>0.047</td>\n",
       "      <td>6632</td>\n",
       "      <td>9733</td>\n",
       "      <td>28.12</td>\n",
       "      <td>145</td>\n",
       "      <td>Aleut</td>\n",
       "      <td>27</td>\n",
       "      <td>2448</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>11</td>\n",
       "      <td>Washeteria / Water Plant</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>228648600</td>\n",
       "      <td>P O Box 10</td>\n",
       "      <td>Shaktoolik</td>\n",
       "      <td>Water Treatment Plant</td>\n",
       "      <td>0.082</td>\n",
       "      <td>6638</td>\n",
       "      <td>13919</td>\n",
       "      <td>25.91</td>\n",
       "      <td>688</td>\n",
       "      <td>Bering Straits Native Corporation</td>\n",
       "      <td>35</td>\n",
       "      <td>2112</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   Com_AkwarmMetadataID                Usage_Type  TotalVent  \\\n",
       "0                   157  Washeteria / Water Plant        NaN   \n",
       "1                    10    Office_Less_Than_20000        NaN   \n",
       "2                   496          Education_Single     312000   \n",
       "3                   603    Office_Less_Than_20000        NaN   \n",
       "4                    11  Washeteria / Water Plant        NaN   \n",
       "\n",
       "   Vent / SQFT / YR  Vent / Envelope Area / YR  AnnThermalBTU  \\\n",
       "0               NaN                        NaN       73733315   \n",
       "1               NaN                        NaN      153055389   \n",
       "2                82                        285      317419830   \n",
       "3               NaN                        NaN      126399681   \n",
       "4               NaN                        NaN      228648600   \n",
       "\n",
       "                       bi_Addr     bi_City                      bi_BldgName  \\\n",
       "0                  P O Box 109   Sleetmute  Sleetmute Water Treatment Plant   \n",
       "1                  P O Box 100  Shaktoolik           Tribal Office Building   \n",
       "2                    1710 30th   Fairbanks             Fire Training Center   \n",
       "3  Lot 3 ANCSA 14(c) Plat 90-2  False Pass             False Pass City Hall   \n",
       "4                   P O Box 10  Shaktoolik            Water Treatment Plant   \n",
       "\n",
       "   TotalUvalue  EnvelopeArea    HDD  PrimaryFuel_C/MMBTU  AnnualEnergyMMBTUs  \\\n",
       "0        0.049          2312  13339                45.45                 380   \n",
       "1        0.082          3523  13919                25.91                 177   \n",
       "2        0.051         11758  14274                18.41                 345   \n",
       "3        0.047          6632   9733                28.12                 145   \n",
       "4        0.082          6638  13919                25.91                 688   \n",
       "\n",
       "                                  RegionName  age  sqft  \n",
       "0                                    Calista   22   693  \n",
       "1          Bering Straits Native Corporation   37  1064  \n",
       "2  Doyon - Fairbanks North Star Borough only   31  3796  \n",
       "3                                      Aleut   27  2448  \n",
       "4          Bering Straits Native Corporation   35  2112  "
      ]
     },
     "execution_count": 75,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "clean_df = clean_df.rename(columns = {'Research Usage Types:':'Usage_Type',\n",
    "                                      'Total Vent AirExch (ft3/yr)':'TotalVent',\n",
    "                                      'Envelope U-value':'TotalUvalue',\n",
    "                                      'BEST SQFT':'sqft',\n",
    "                                      'HDD(FromWhitePaper)':'HDD',\n",
    "                                      'Building Age:':'age',\n",
    "                                      'ThermalBTU/YR':'AnnThermalBTU',\n",
    "                                      'EnvelopeArea:':'EnvelopeArea'\n",
    "                                     })\n",
    "clean_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 76,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "Com_AkwarmMetadataID           int64\n",
       "Usage_Type                    object\n",
       "TotalVent                    float64\n",
       "Vent / SQFT / YR             float64\n",
       "Vent / Envelope Area / YR    float64\n",
       "AnnThermalBTU                  int64\n",
       "bi_Addr                       object\n",
       "bi_City                       object\n",
       "bi_BldgName                   object\n",
       "TotalUvalue                  float64\n",
       "EnvelopeArea                 float64\n",
       "HDD                          float64\n",
       "PrimaryFuel_C/MMBTU          float64\n",
       "AnnualEnergyMMBTUs             int64\n",
       "RegionName                    object\n",
       "age                            int64\n",
       "sqft                           int64\n",
       "dtype: object"
      ]
     },
     "execution_count": 76,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "clean_df.dtypes"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 84,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Com_AkwarmMetadataID</th>\n",
       "      <th>Usage_Type</th>\n",
       "      <th>TotalVent</th>\n",
       "      <th>Vent / SQFT / YR</th>\n",
       "      <th>Vent / Envelope Area / YR</th>\n",
       "      <th>AnnThermalBTU</th>\n",
       "      <th>bi_Addr</th>\n",
       "      <th>bi_City</th>\n",
       "      <th>bi_BldgName</th>\n",
       "      <th>TotalUvalue</th>\n",
       "      <th>EnvelopeArea</th>\n",
       "      <th>HDD</th>\n",
       "      <th>PrimaryFuel_C/MMBTU</th>\n",
       "      <th>AnnualEnergyMMBTUs</th>\n",
       "      <th>RegionName</th>\n",
       "      <th>age</th>\n",
       "      <th>sqft</th>\n",
       "      <th>ThermalMMBTU</th>\n",
       "      <th>ThermalKBTU</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>157</td>\n",
       "      <td>Washeteria / Water Plant</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>73733315</td>\n",
       "      <td>P O Box 109</td>\n",
       "      <td>Sleetmute</td>\n",
       "      <td>Sleetmute Water Treatment Plant</td>\n",
       "      <td>0.049</td>\n",
       "      <td>2312</td>\n",
       "      <td>13339</td>\n",
       "      <td>45.45</td>\n",
       "      <td>380</td>\n",
       "      <td>Calista</td>\n",
       "      <td>22</td>\n",
       "      <td>693</td>\n",
       "      <td>73.733315</td>\n",
       "      <td>73733.315</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>10</td>\n",
       "      <td>Office_Less_Than_20000</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>153055389</td>\n",
       "      <td>P O Box 100</td>\n",
       "      <td>Shaktoolik</td>\n",
       "      <td>Tribal Office Building</td>\n",
       "      <td>0.082</td>\n",
       "      <td>3523</td>\n",
       "      <td>13919</td>\n",
       "      <td>25.91</td>\n",
       "      <td>177</td>\n",
       "      <td>Bering Straits Native Corporation</td>\n",
       "      <td>37</td>\n",
       "      <td>1064</td>\n",
       "      <td>153.055389</td>\n",
       "      <td>153055.389</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>496</td>\n",
       "      <td>Education_Single</td>\n",
       "      <td>312000</td>\n",
       "      <td>82</td>\n",
       "      <td>285</td>\n",
       "      <td>317419830</td>\n",
       "      <td>1710 30th</td>\n",
       "      <td>Fairbanks</td>\n",
       "      <td>Fire Training Center</td>\n",
       "      <td>0.051</td>\n",
       "      <td>11758</td>\n",
       "      <td>14274</td>\n",
       "      <td>18.41</td>\n",
       "      <td>345</td>\n",
       "      <td>Doyon - Fairbanks North Star Borough only</td>\n",
       "      <td>31</td>\n",
       "      <td>3796</td>\n",
       "      <td>317.419830</td>\n",
       "      <td>317419.830</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>603</td>\n",
       "      <td>Office_Less_Than_20000</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>126399681</td>\n",
       "      <td>Lot 3 ANCSA 14(c) Plat 90-2</td>\n",
       "      <td>False Pass</td>\n",
       "      <td>False Pass City Hall</td>\n",
       "      <td>0.047</td>\n",
       "      <td>6632</td>\n",
       "      <td>9733</td>\n",
       "      <td>28.12</td>\n",
       "      <td>145</td>\n",
       "      <td>Aleut</td>\n",
       "      <td>27</td>\n",
       "      <td>2448</td>\n",
       "      <td>126.399681</td>\n",
       "      <td>126399.681</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>11</td>\n",
       "      <td>Washeteria / Water Plant</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>228648600</td>\n",
       "      <td>P O Box 10</td>\n",
       "      <td>Shaktoolik</td>\n",
       "      <td>Water Treatment Plant</td>\n",
       "      <td>0.082</td>\n",
       "      <td>6638</td>\n",
       "      <td>13919</td>\n",
       "      <td>25.91</td>\n",
       "      <td>688</td>\n",
       "      <td>Bering Straits Native Corporation</td>\n",
       "      <td>35</td>\n",
       "      <td>2112</td>\n",
       "      <td>228.648600</td>\n",
       "      <td>228648.600</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   Com_AkwarmMetadataID                Usage_Type  TotalVent  \\\n",
       "0                   157  Washeteria / Water Plant        NaN   \n",
       "1                    10    Office_Less_Than_20000        NaN   \n",
       "2                   496          Education_Single     312000   \n",
       "3                   603    Office_Less_Than_20000        NaN   \n",
       "4                    11  Washeteria / Water Plant        NaN   \n",
       "\n",
       "   Vent / SQFT / YR  Vent / Envelope Area / YR  AnnThermalBTU  \\\n",
       "0               NaN                        NaN       73733315   \n",
       "1               NaN                        NaN      153055389   \n",
       "2                82                        285      317419830   \n",
       "3               NaN                        NaN      126399681   \n",
       "4               NaN                        NaN      228648600   \n",
       "\n",
       "                       bi_Addr     bi_City                      bi_BldgName  \\\n",
       "0                  P O Box 109   Sleetmute  Sleetmute Water Treatment Plant   \n",
       "1                  P O Box 100  Shaktoolik           Tribal Office Building   \n",
       "2                    1710 30th   Fairbanks             Fire Training Center   \n",
       "3  Lot 3 ANCSA 14(c) Plat 90-2  False Pass             False Pass City Hall   \n",
       "4                   P O Box 10  Shaktoolik            Water Treatment Plant   \n",
       "\n",
       "   TotalUvalue  EnvelopeArea    HDD  PrimaryFuel_C/MMBTU  AnnualEnergyMMBTUs  \\\n",
       "0        0.049          2312  13339                45.45                 380   \n",
       "1        0.082          3523  13919                25.91                 177   \n",
       "2        0.051         11758  14274                18.41                 345   \n",
       "3        0.047          6632   9733                28.12                 145   \n",
       "4        0.082          6638  13919                25.91                 688   \n",
       "\n",
       "                                  RegionName  age  sqft  ThermalMMBTU  \\\n",
       "0                                    Calista   22   693     73.733315   \n",
       "1          Bering Straits Native Corporation   37  1064    153.055389   \n",
       "2  Doyon - Fairbanks North Star Borough only   31  3796    317.419830   \n",
       "3                                      Aleut   27  2448    126.399681   \n",
       "4          Bering Straits Native Corporation   35  2112    228.648600   \n",
       "\n",
       "   ThermalKBTU  \n",
       "0    73733.315  \n",
       "1   153055.389  \n",
       "2   317419.830  \n",
       "3   126399.681  \n",
       "4   228648.600  "
      ]
     },
     "execution_count": 84,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "clean_df['ThermalKBTU'] = clean_df['AnnThermalBTU']/1000\n",
    "clean_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 85,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table class=\"simpletable\">\n",
       "<caption>OLS Regression Results</caption>\n",
       "<tr>\n",
       "  <th>Dep. Variable:</th>       <td>ThermalKBTU</td>   <th>  R-squared:         </th> <td>   0.756</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.753</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   216.6</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Date:</th>             <td>Tue, 15 Sep 2015</td> <th>  Prob (F-statistic):</th> <td>2.85e-84</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Time:</th>                 <td>11:16:49</td>     <th>  Log-Likelihood:    </th> <td> -4575.5</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>No. Observations:</th>      <td>   284</td>      <th>  AIC:               </th> <td>   9161.</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Df Residuals:</th>          <td>   279</td>      <th>  BIC:               </th> <td>   9179.</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Df Model:</th>              <td>     4</td>      <th>                     </th>     <td> </td>   \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>   \n",
       "</tr>\n",
       "</table>\n",
       "<table class=\"simpletable\">\n",
       "<tr>\n",
       "        <td></td>          <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th> <th>[95.0% Conf. Int.]</th> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Intercept</th>    <td>-4.168e+06</td> <td> 9.27e+05</td> <td>   -4.496</td> <td> 0.000</td> <td>-5.99e+06 -2.34e+06</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>HDD</th>          <td>  268.8950</td> <td>   53.168</td> <td>    5.057</td> <td> 0.000</td> <td>  164.234   373.556</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>EnvelopeArea</th> <td>   26.8161</td> <td>    1.876</td> <td>   14.297</td> <td> 0.000</td> <td>   23.124    30.508</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>TotalUvalue</th>  <td> 1.685e+07</td> <td> 5.68e+06</td> <td>    2.967</td> <td> 0.003</td> <td> 5.67e+06   2.8e+07</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>TotalVent</th>    <td>    0.0004</td> <td> 2.51e-05</td> <td>   15.661</td> <td> 0.000</td> <td>    0.000     0.000</td>\n",
       "</tr>\n",
       "</table>\n",
       "<table class=\"simpletable\">\n",
       "<tr>\n",
       "  <th>Omnibus:</th>       <td>333.241</td> <th>  Durbin-Watson:     </th> <td>   2.178</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Prob(Omnibus):</th> <td> 0.000</td>  <th>  Jarque-Bera (JB):  </th> <td>26836.999</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Skew:</th>          <td> 4.923</td>  <th>  Prob(JB):          </th> <td>    0.00</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Kurtosis:</th>      <td>49.594</td>  <th>  Cond. No.          </th> <td>3.03e+11</td> \n",
       "</tr>\n",
       "</table>"
      ],
      "text/plain": [
       "<class 'statsmodels.iolib.summary.Summary'>\n",
       "\"\"\"\n",
       "                            OLS Regression Results                            \n",
       "==============================================================================\n",
       "Dep. Variable:            ThermalKBTU   R-squared:                       0.756\n",
       "Model:                            OLS   Adj. R-squared:                  0.753\n",
       "Method:                 Least Squares   F-statistic:                     216.6\n",
       "Date:                Tue, 15 Sep 2015   Prob (F-statistic):           2.85e-84\n",
       "Time:                        11:16:49   Log-Likelihood:                -4575.5\n",
       "No. Observations:                 284   AIC:                             9161.\n",
       "Df Residuals:                     279   BIC:                             9179.\n",
       "Df Model:                           4                                         \n",
       "Covariance Type:            nonrobust                                         \n",
       "================================================================================\n",
       "                   coef    std err          t      P>|t|      [95.0% Conf. Int.]\n",
       "--------------------------------------------------------------------------------\n",
       "Intercept    -4.168e+06   9.27e+05     -4.496      0.000     -5.99e+06 -2.34e+06\n",
       "HDD            268.8950     53.168      5.057      0.000       164.234   373.556\n",
       "EnvelopeArea    26.8161      1.876     14.297      0.000        23.124    30.508\n",
       "TotalUvalue   1.685e+07   5.68e+06      2.967      0.003      5.67e+06   2.8e+07\n",
       "TotalVent        0.0004   2.51e-05     15.661      0.000         0.000     0.000\n",
       "==============================================================================\n",
       "Omnibus:                      333.241   Durbin-Watson:                   2.178\n",
       "Prob(Omnibus):                  0.000   Jarque-Bera (JB):            26836.999\n",
       "Skew:                           4.923   Prob(JB):                         0.00\n",
       "Kurtosis:                      49.594   Cond. No.                     3.03e+11\n",
       "==============================================================================\n",
       "\n",
       "Warnings:\n",
       "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n",
       "[2] The condition number is large, 3.03e+11. This might indicate that there are\n",
       "strong multicollinearity or other numerical problems.\n",
       "\"\"\""
      ]
     },
     "execution_count": 85,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "est = smf.ols(formula='ThermalKBTU ~ HDD + EnvelopeArea + TotalUvalue + TotalVent', data=clean_df).fit()\n",
    "est.summary()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 86,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table class=\"simpletable\">\n",
       "<caption>OLS Regression Results</caption>\n",
       "<tr>\n",
       "  <th>Dep. Variable:</th>       <td>ThermalKBTU</td>   <th>  R-squared:         </th> <td>   0.564</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.563</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   366.6</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Date:</th>             <td>Tue, 15 Sep 2015</td> <th>  Prob (F-statistic):</th> <td>5.44e-53</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Time:</th>                 <td>12:03:13</td>     <th>  Log-Likelihood:    </th> <td> -4674.3</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>No. Observations:</th>      <td>   285</td>      <th>  AIC:               </th> <td>   9353.</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Df Residuals:</th>          <td>   283</td>      <th>  BIC:               </th> <td>   9360.</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Df Model:</th>              <td>     1</td>      <th>                     </th>     <td> </td>   \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>   \n",
       "</tr>\n",
       "</table>\n",
       "<table class=\"simpletable\">\n",
       "<tr>\n",
       "      <td></td>         <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th> <th>[95.0% Conf. Int.]</th> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Intercept</th> <td> 2.129e+06</td> <td> 2.15e+05</td> <td>    9.886</td> <td> 0.000</td> <td> 1.71e+06  2.55e+06</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>TotalVent</th> <td>    0.0005</td> <td> 2.83e-05</td> <td>   19.147</td> <td> 0.000</td> <td>    0.000     0.001</td>\n",
       "</tr>\n",
       "</table>\n",
       "<table class=\"simpletable\">\n",
       "<tr>\n",
       "  <th>Omnibus:</th>       <td>213.805</td> <th>  Durbin-Watson:     </th> <td>   1.707</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Prob(Omnibus):</th> <td> 0.000</td>  <th>  Jarque-Bera (JB):  </th> <td>4514.785</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Skew:</th>          <td> 2.757</td>  <th>  Prob(JB):          </th> <td>    0.00</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Kurtosis:</th>      <td>21.702</td>  <th>  Cond. No.          </th> <td>8.60e+09</td>\n",
       "</tr>\n",
       "</table>"
      ],
      "text/plain": [
       "<class 'statsmodels.iolib.summary.Summary'>\n",
       "\"\"\"\n",
       "                            OLS Regression Results                            \n",
       "==============================================================================\n",
       "Dep. Variable:            ThermalKBTU   R-squared:                       0.564\n",
       "Model:                            OLS   Adj. R-squared:                  0.563\n",
       "Method:                 Least Squares   F-statistic:                     366.6\n",
       "Date:                Tue, 15 Sep 2015   Prob (F-statistic):           5.44e-53\n",
       "Time:                        12:03:13   Log-Likelihood:                -4674.3\n",
       "No. Observations:                 285   AIC:                             9353.\n",
       "Df Residuals:                     283   BIC:                             9360.\n",
       "Df Model:                           1                                         \n",
       "Covariance Type:            nonrobust                                         \n",
       "==============================================================================\n",
       "                 coef    std err          t      P>|t|      [95.0% Conf. Int.]\n",
       "------------------------------------------------------------------------------\n",
       "Intercept   2.129e+06   2.15e+05      9.886      0.000      1.71e+06  2.55e+06\n",
       "TotalVent      0.0005   2.83e-05     19.147      0.000         0.000     0.001\n",
       "==============================================================================\n",
       "Omnibus:                      213.805   Durbin-Watson:                   1.707\n",
       "Prob(Omnibus):                  0.000   Jarque-Bera (JB):             4514.785\n",
       "Skew:                           2.757   Prob(JB):                         0.00\n",
       "Kurtosis:                      21.702   Cond. No.                     8.60e+09\n",
       "==============================================================================\n",
       "\n",
       "Warnings:\n",
       "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n",
       "[2] The condition number is large, 8.6e+09. This might indicate that there are\n",
       "strong multicollinearity or other numerical problems.\n",
       "\"\"\""
      ]
     },
     "execution_count": 86,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "vent_est = smf.ols(formula='ThermalKBTU ~ TotalVent', data=clean_df).fit()\n",
    "vent_est.summary()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 88,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "array(['Washeteria / Water Plant', 'Office_Less_Than_20000',\n",
       "       'Education_Single', 'Public_Order', 'Health Clinic',\n",
       "       'Maintenance / Shop', 'Education_Less_Than_30000',\n",
       "       'Athletic_Facility', 'Public_Assembly',\n",
       "       'Education_Greater_Than_30000', 'Warehousing',\n",
       "       'Office_20000_To_50000', 'Terminals (Airport, Bus, Harbor, Train)',\n",
       "       'Office_Greater_Than_50000', 'Residential_Multi_Fam_5_Plus_Units',\n",
       "       'Hospital', 'Pool', 'Other', 'Accommodations_Hotel'], dtype=object)"
      ]
     },
     "execution_count": 88,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "clean_df['Usage_Type'].unique()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 89,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Com_AkwarmMetadataID</th>\n",
       "      <th>Usage_Type</th>\n",
       "      <th>TotalVent</th>\n",
       "      <th>Vent / SQFT / YR</th>\n",
       "      <th>Vent / Envelope Area / YR</th>\n",
       "      <th>AnnThermalBTU</th>\n",
       "      <th>bi_Addr</th>\n",
       "      <th>bi_City</th>\n",
       "      <th>bi_BldgName</th>\n",
       "      <th>TotalUvalue</th>\n",
       "      <th>EnvelopeArea</th>\n",
       "      <th>HDD</th>\n",
       "      <th>PrimaryFuel_C/MMBTU</th>\n",
       "      <th>AnnualEnergyMMBTUs</th>\n",
       "      <th>RegionName</th>\n",
       "      <th>age</th>\n",
       "      <th>sqft</th>\n",
       "      <th>ThermalMMBTU</th>\n",
       "      <th>ThermalKBTU</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>38</th>\n",
       "      <td>429</td>\n",
       "      <td>Education_Greater_Than_30000</td>\n",
       "      <td>3531713858</td>\n",
       "      <td>53215</td>\n",
       "      <td>217346</td>\n",
       "      <td>6157784390</td>\n",
       "      <td>11700 Gregory Road</td>\n",
       "      <td>Anchorage</td>\n",
       "      <td>Bowman Elementary School</td>\n",
       "      <td>0.050</td>\n",
       "      <td>174723</td>\n",
       "      <td>10816</td>\n",
       "      <td>9.40</td>\n",
       "      <td>7983</td>\n",
       "      <td>Cook Inlet Regional (CIRI) - Anchorage Borough...</td>\n",
       "      <td>21</td>\n",
       "      <td>66367</td>\n",
       "      <td>6157.784390</td>\n",
       "      <td>6157784.390</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>39</th>\n",
       "      <td>430</td>\n",
       "      <td>Education_Greater_Than_30000</td>\n",
       "      <td>2308146856</td>\n",
       "      <td>40272</td>\n",
       "      <td>178697</td>\n",
       "      <td>5615185000</td>\n",
       "      <td>3101 West 88th Avenue</td>\n",
       "      <td>Anchorage</td>\n",
       "      <td>Chinook  Elementary</td>\n",
       "      <td>0.059</td>\n",
       "      <td>138888</td>\n",
       "      <td>10816</td>\n",
       "      <td>9.45</td>\n",
       "      <td>7007</td>\n",
       "      <td>Cook Inlet Regional (CIRI) - Anchorage Borough...</td>\n",
       "      <td>44</td>\n",
       "      <td>57314</td>\n",
       "      <td>5615.185000</td>\n",
       "      <td>5615185.000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>41</th>\n",
       "      <td>420</td>\n",
       "      <td>Education_Greater_Than_30000</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2295817140</td>\n",
       "      <td>1000 School Road</td>\n",
       "      <td>Nondalton</td>\n",
       "      <td>Nondalton K-12</td>\n",
       "      <td>0.046</td>\n",
       "      <td>37558</td>\n",
       "      <td>11130</td>\n",
       "      <td>37.68</td>\n",
       "      <td>2454</td>\n",
       "      <td>Bristol Bay Native Corporation</td>\n",
       "      <td>34</td>\n",
       "      <td>21744</td>\n",
       "      <td>2295.817140</td>\n",
       "      <td>2295817.140</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>56</th>\n",
       "      <td>452</td>\n",
       "      <td>Education_Greater_Than_30000</td>\n",
       "      <td>769007342</td>\n",
       "      <td>19136</td>\n",
       "      <td>97827</td>\n",
       "      <td>3641970004</td>\n",
       "      <td>705 Frontage Road</td>\n",
       "      <td>Kenai</td>\n",
       "      <td>Kenai Elementary</td>\n",
       "      <td>0.112</td>\n",
       "      <td>84526</td>\n",
       "      <td>11395</td>\n",
       "      <td>8.95</td>\n",
       "      <td>5196</td>\n",
       "      <td>Cook Inlet Regional (CIRI) - outside Anchorage...</td>\n",
       "      <td>63</td>\n",
       "      <td>40187</td>\n",
       "      <td>3641.970004</td>\n",
       "      <td>3641970.004</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>72</th>\n",
       "      <td>426</td>\n",
       "      <td>Education_Greater_Than_30000</td>\n",
       "      <td>2095778367</td>\n",
       "      <td>56548</td>\n",
       "      <td>314971</td>\n",
       "      <td>1579631000</td>\n",
       "      <td>Main Elem School Drive</td>\n",
       "      <td>Kodiak</td>\n",
       "      <td>Main Elementary School</td>\n",
       "      <td>0.047</td>\n",
       "      <td>71547</td>\n",
       "      <td>8539</td>\n",
       "      <td>16.09</td>\n",
       "      <td>2704</td>\n",
       "      <td>Koniag</td>\n",
       "      <td>28</td>\n",
       "      <td>37062</td>\n",
       "      <td>1579.631000</td>\n",
       "      <td>1579631.000</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "    Com_AkwarmMetadataID                    Usage_Type   TotalVent  \\\n",
       "38                   429  Education_Greater_Than_30000  3531713858   \n",
       "39                   430  Education_Greater_Than_30000  2308146856   \n",
       "41                   420  Education_Greater_Than_30000         NaN   \n",
       "56                   452  Education_Greater_Than_30000   769007342   \n",
       "72                   426  Education_Greater_Than_30000  2095778367   \n",
       "\n",
       "    Vent / SQFT / YR  Vent / Envelope Area / YR  AnnThermalBTU  \\\n",
       "38             53215                     217346     6157784390   \n",
       "39             40272                     178697     5615185000   \n",
       "41               NaN                        NaN     2295817140   \n",
       "56             19136                      97827     3641970004   \n",
       "72             56548                     314971     1579631000   \n",
       "\n",
       "                   bi_Addr    bi_City               bi_BldgName  TotalUvalue  \\\n",
       "38      11700 Gregory Road  Anchorage  Bowman Elementary School        0.050   \n",
       "39   3101 West 88th Avenue  Anchorage       Chinook  Elementary        0.059   \n",
       "41        1000 School Road  Nondalton            Nondalton K-12        0.046   \n",
       "56       705 Frontage Road      Kenai          Kenai Elementary        0.112   \n",
       "72  Main Elem School Drive     Kodiak    Main Elementary School        0.047   \n",
       "\n",
       "    EnvelopeArea    HDD  PrimaryFuel_C/MMBTU  AnnualEnergyMMBTUs  \\\n",
       "38        174723  10816                 9.40                7983   \n",
       "39        138888  10816                 9.45                7007   \n",
       "41         37558  11130                37.68                2454   \n",
       "56         84526  11395                 8.95                5196   \n",
       "72         71547   8539                16.09                2704   \n",
       "\n",
       "                                           RegionName  age   sqft  \\\n",
       "38  Cook Inlet Regional (CIRI) - Anchorage Borough...   21  66367   \n",
       "39  Cook Inlet Regional (CIRI) - Anchorage Borough...   44  57314   \n",
       "41                     Bristol Bay Native Corporation   34  21744   \n",
       "56  Cook Inlet Regional (CIRI) - outside Anchorage...   63  40187   \n",
       "72                                             Koniag   28  37062   \n",
       "\n",
       "    ThermalMMBTU  ThermalKBTU  \n",
       "38   6157.784390  6157784.390  \n",
       "39   5615.185000  5615185.000  \n",
       "41   2295.817140  2295817.140  \n",
       "56   3641.970004  3641970.004  \n",
       "72   1579.631000  1579631.000  "
      ]
     },
     "execution_count": 89,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "schools = clean_df.query(\"Usage_Type == 'Education_Greater_Than_30000'\")\n",
    "schools.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 91,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "(104, 19)"
      ]
     },
     "execution_count": 91,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "schools.shape"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 92,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table class=\"simpletable\">\n",
       "<caption>OLS Regression Results</caption>\n",
       "<tr>\n",
       "  <th>Dep. Variable:</th>       <td>ThermalKBTU</td>   <th>  R-squared:         </th> <td>   0.792</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.783</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   90.17</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Date:</th>             <td>Tue, 15 Sep 2015</td> <th>  Prob (F-statistic):</th> <td>1.75e-31</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Time:</th>                 <td>12:07:26</td>     <th>  Log-Likelihood:    </th> <td> -1618.1</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>No. Observations:</th>      <td>   100</td>      <th>  AIC:               </th> <td>   3246.</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Df Residuals:</th>          <td>    95</td>      <th>  BIC:               </th> <td>   3259.</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Df Model:</th>              <td>     4</td>      <th>                     </th>     <td> </td>   \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>   \n",
       "</tr>\n",
       "</table>\n",
       "<table class=\"simpletable\">\n",
       "<tr>\n",
       "        <td></td>          <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th> <th>[95.0% Conf. Int.]</th> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Intercept</th>    <td>-3.238e+06</td> <td> 1.88e+06</td> <td>   -1.726</td> <td> 0.088</td> <td>-6.96e+06  4.87e+05</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>HDD</th>          <td>  201.4390</td> <td>  111.315</td> <td>    1.810</td> <td> 0.074</td> <td>  -19.550   422.428</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>EnvelopeArea</th> <td>   25.6131</td> <td>    3.132</td> <td>    8.178</td> <td> 0.000</td> <td>   19.395    31.831</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>TotalUvalue</th>  <td> 1.257e+07</td> <td> 1.11e+07</td> <td>    1.131</td> <td> 0.261</td> <td>-9.49e+06  3.46e+07</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>TotalVent</th>    <td>    0.0004</td> <td>  4.8e-05</td> <td>    8.856</td> <td> 0.000</td> <td>    0.000     0.001</td>\n",
       "</tr>\n",
       "</table>\n",
       "<table class=\"simpletable\">\n",
       "<tr>\n",
       "  <th>Omnibus:</th>       <td>38.934</td> <th>  Durbin-Watson:     </th> <td>   1.941</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Prob(Omnibus):</th> <td> 0.000</td> <th>  Jarque-Bera (JB):  </th> <td> 116.462</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Skew:</th>          <td> 1.329</td> <th>  Prob(JB):          </th> <td>5.14e-26</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Kurtosis:</th>      <td> 7.571</td> <th>  Cond. No.          </th> <td>3.79e+11</td>\n",
       "</tr>\n",
       "</table>"
      ],
      "text/plain": [
       "<class 'statsmodels.iolib.summary.Summary'>\n",
       "\"\"\"\n",
       "                            OLS Regression Results                            \n",
       "==============================================================================\n",
       "Dep. Variable:            ThermalKBTU   R-squared:                       0.792\n",
       "Model:                            OLS   Adj. R-squared:                  0.783\n",
       "Method:                 Least Squares   F-statistic:                     90.17\n",
       "Date:                Tue, 15 Sep 2015   Prob (F-statistic):           1.75e-31\n",
       "Time:                        12:07:26   Log-Likelihood:                -1618.1\n",
       "No. Observations:                 100   AIC:                             3246.\n",
       "Df Residuals:                      95   BIC:                             3259.\n",
       "Df Model:                           4                                         \n",
       "Covariance Type:            nonrobust                                         \n",
       "================================================================================\n",
       "                   coef    std err          t      P>|t|      [95.0% Conf. Int.]\n",
       "--------------------------------------------------------------------------------\n",
       "Intercept    -3.238e+06   1.88e+06     -1.726      0.088     -6.96e+06  4.87e+05\n",
       "HDD            201.4390    111.315      1.810      0.074       -19.550   422.428\n",
       "EnvelopeArea    25.6131      3.132      8.178      0.000        19.395    31.831\n",
       "TotalUvalue   1.257e+07   1.11e+07      1.131      0.261     -9.49e+06  3.46e+07\n",
       "TotalVent        0.0004    4.8e-05      8.856      0.000         0.000     0.001\n",
       "==============================================================================\n",
       "Omnibus:                       38.934   Durbin-Watson:                   1.941\n",
       "Prob(Omnibus):                  0.000   Jarque-Bera (JB):              116.462\n",
       "Skew:                           1.329   Prob(JB):                     5.14e-26\n",
       "Kurtosis:                       7.571   Cond. No.                     3.79e+11\n",
       "==============================================================================\n",
       "\n",
       "Warnings:\n",
       "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n",
       "[2] The condition number is large, 3.79e+11. This might indicate that there are\n",
       "strong multicollinearity or other numerical problems.\n",
       "\"\"\""
      ]
     },
     "execution_count": 92,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "schools_est = smf.ols(formula='ThermalKBTU ~ HDD + EnvelopeArea + TotalUvalue + TotalVent', data=schools).fit()\n",
    "schools_est.summary()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 93,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Intercept       -3237709.209303\n",
      "HDD                  201.439031\n",
      "EnvelopeArea          25.613069\n",
      "TotalUvalue     12569424.652021\n",
      "TotalVent              0.000425\n",
      "dtype: float64\n"
     ]
    }
   ],
   "source": [
    "print schools_est.params"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 95,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "0.791511777325\n"
     ]
    }
   ],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 2",
   "language": "python",
   "name": "python2"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 2
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython2",
   "version": "2.7.6"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 0
}
